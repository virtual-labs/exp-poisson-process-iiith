<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Author: Harsh Kapoor,
    Purpose: Education and Learning,
    Content Level: College,
    An interactive experiment on probability and Poisson process.">

  <title>Merging and Splitting of Poisson Process</title>

  <!-- Stylesheets -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/virtual-labs/virtual-style@0.0.8-b/css/style.min.css" />
  <link rel="stylesheet" href="./css/css1.css" />

  <!-- MathJax -->
  <script type="text/javascript" id="MathJax-script" async
    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>

  <!-- Chart.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.1/chart.min.js"></script>

  <style>
    body {
      padding-top: 20px;
    }

    .tasks-heading {
      text-align: center;
      font-size: 1.25rem;
      font-weight: 600;
      margin-bottom: 0.5rem;
      color: #444;
    }

    .v-tabs ul {
      display: flex;
      overflow-x: auto;
      white-space: nowrap;
      list-style: none;
      padding: 0;
      margin: 0 3%;
      border-bottom: 1px solid #ddd;
    }

    .v-tabs li {
      display: inline-block;
      margin: 0;
    }

    .v-tabs a {
      display: inline-block;
      padding: 0.75rem 1.25rem;
      text-decoration: none;
      color: #333;
      font-weight: 500;
    }

    .v-tabs li.active > a {
      color: #3273dc;
      border-bottom: 3px solid #3273dc;
    }

    .v-tabs a:hover {
      background-color: #f0f0f0;
      border-radius: 4px;
    }

    .subheading-box {
      background-color: #f7fdf7;
      border-left: 4px solid #3c763d;
      padding: 0.75rem 1rem;
      margin: 1rem 3% 1.5rem 3%;
      border-radius: 4px;
    }

    .subheading-box .title {
      color: #3c763d;
      font-size: 1.25rem;
      font-weight: 600;
      margin: 0;
    }

    .controls-container {
      display: flex;
      justify-content: space-around;
      flex-wrap: wrap;
      gap: 1rem;
    }

    .field {
      flex: 1;
      min-width: 280px;
    }

    .label {
      display: block;
      text-align: center;
      font-weight: 500;
      margin-bottom: 0.25rem;
    }

    .value-display {
      display: block;
      text-align: center;
      font-weight: bold;
      margin-top: 0.3rem;
    }

    .nucleus-img {
      position: absolute;
      width: 100px;
      height: 100px;
      transform: translate(-50%, -50%);
    }

    #animationContainer {
      position: relative;
      height: 400px;
      width: 100%;
      background-color: #f8f8f8;
      border-radius: 4px;
    }

    #emitCanvas {
      width: 100%;
      height: 100%;
      position: absolute;
      top: 0;
      left: 0;
      background-color: transparent !important;
      border: none !important;
    }

    #lineChart,
    #histogramChart {
      width: 100% !important;
      height: 100% !important;
    }

    .chart-wrapper {
      position: relative;
      height: 192px;
      margin-bottom: 1rem;
    }

    .chart-wrapper:last-child {
      margin-bottom: 0;
    }

    .main-experiment-panel {
      border: 2px solid #8dc63f !important;
      border-radius: 8px !important;
      padding-bottom: 10px !important;
    }

    .white-boxed-panel {
      background-color: #fff;
      border: 1px solid #dbdbdb;
      border-radius: 6px;
      padding: 1.25rem;
      margin-bottom: 1.5rem;
    }

    .white-boxed-panel:last-child {
      margin-bottom: 0;
    }

    .white-boxed-panel .v-datalist-title {
      margin-bottom: 0.75rem;
      padding-bottom: 0.75rem;
      border-bottom: 1px solid #eee;
    }

    .canvas-container {
      margin: 0 3% 2% 3%;
    }

    #observations {
      padding: 10px;
    }
  </style>
</head>

<body>
  <div class="container">

    <div class="tasks-heading">Tasks</div>

    <div class="v-tabs">
      <ul>
        <li onclick="window.location.href='exp1.html';"><a>Sub Experiment – 1</a></li>
        <li class="active"><a>Sub Experiment – 2</a></li>
        <li onclick="window.location.href='exp3.html';"><a>Sub Experiment – 3</a></li>
      </ul>
    </div>

    <div class="subheading-box">
      <p class="title">Merging and Splitting of Poisson Process</p>
    </div>

    <!-- Instructions -->
    <div class="columns is-centered">
      <div class="column">
        <div class="v-collapsible-instruction-container v-instruction-container">
          <div class="v-collapsible is-size-5">Instructions</div>
          <div class="v-content" style="text-align: left; padding: 0 10%;">
            <ul style="list-style: disc;">
              <li>Two independent Poisson “emitters” (radioactive nuclei) have rates \(\lambda_1\) and \(\lambda_2\).</li>
              <li><strong>Merging:</strong> Combine both to generate Poisson(\(\lambda_1 + \lambda_2\)).</li>
              <li><strong>Splitting:</strong> Independently generate Poisson(\(\lambda_1\)) and Poisson(\(\lambda_2\)).</li>
              <li>Use sliders to set rates, and choose mode using buttons.</li>
              <li>Left: animation of emission. Right: line chart + histogram.</li>
              <li>Observations include theoretical vs. empirical rate and error.</li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <!-- Simulation Panel -->
    <div class="columns is-centered">
      <div class="column is-11-desktop is-12-tablet is-12-mobile">
        <div class="v-datalist-container components-list main-experiment-panel">
          <h3 class="v-datalist-title" style="text-align: center; margin: 10px 0 20px;">Poisson Merge/Split Simulation</h3>

          <!-- Controls -->
          <div class="white-boxed-panel" style="margin: 0 1% .5rem 1%;">
            <div class="controls-container">
              <div class="field">
                <label for="lambda1" class="label">\(\lambda_1\) (Emitter 1):</label>
                <input type="range" id="lambda1" min="1" max="30" step="1" value="6" class="slider" />
                <span id="lambda1Val" class="value-display">6</span>
              </div>
              <div class="field">
                <label for="lambda2" class="label">\(\lambda_2\) (Emitter 2):</label>
                <input type="range" id="lambda2" min="1" max="30" step="1" value="4" class="slider" />
                <span id="lambda2Val" class="value-display">4</span>
              </div>
              <div class="field">
                <label class="label">Mode:</label>
                <div class="buttons has-addons is-centered">
                  <button id="mergeBtn" class="button is-primary">Merging</button>
                  <button id="splitBtn" class="button">Splitting</button>
                </div>
              </div>
            </div>
          </div>

          <!-- Animation and Charts -->
          <section style="width: 63vw; height: 90vh; padding: 1rem;">
            <div class="columns is-multiline is-variable is-2" style="margin: 0 0.5% 3rem 0.5%;">
              <!-- Left Panel -->
              <div class="column is-one-third">
                <div class="white-boxed-panel">
                  <h4 class="v-datalist-subtitle" style="text-align:center; margin-bottom: 0.75rem; font-weight: 600;">
                    Live Emission Animation
                  </h4>
                  <div id="animationContainer">
                    <img src="./images/atom1.png" alt="Emitter 1" class="nucleus-img" id="nuc1" style="display:none; opacity:0;" />
                    <img src="./images/atom1.png" alt="Emitter 2" class="nucleus-img" id="nuc2" style="display:none; opacity:0;" />
                    <img src="./images/atom2.png" alt="Merged Emitter" class="nucleus-img" id="nucMerged" style="display:none; opacity:0;" />
                    <canvas id="emitCanvas"></canvas>
                  </div>
                </div>
              </div>

              <!-- Right Panel -->
              <div class="column is-two-thirds">
                <div class="white-boxed-panel">
                  <h4 class="v-datalist-subtitle" style="text-align:center; margin-bottom: 0.75rem; font-weight: 600;">
                    Real-time Data Plots
                  </h4>
                  <div class="chart-wrapper">
                    <canvas id="lineChart"></canvas>
                  </div>
                  <div class="chart-wrapper">
                    <canvas id="histogramChart"></canvas>
                  </div>
                </div>
              </div>
            </div>
          </section>

          <!-- Observations Panel -->
          <div class="v-datalist-container components-list canvas-container">
            <div class="v-datalist-title">Observations</div>
            <div id="observations"></div>
          </div>

        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/gh/virtual-labs/virtual-style@0.0.8-b/js/script.js"></script>
  <script src="./js/merge_split.js"></script>
</body>

</html>
